<form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="p-4 border rounded shadow-lg bg-light">

  <div class="form-group mb-4">
    <label for="coverImage" class="form-label fw-bold">Imagen de Portada</label>
    <input type="file" (change)="onFileSelected($event)" class="form-control" required>
    <div class="mt-2">
      <img *ngIf="coverImageUrl" [src]="coverImageUrl" alt="Vista previa de imagen" class="img-thumbnail" width="200">
    </div>
  </div>

  <div class="form-group mb-4">
    <label for="name" class="form-label fw-bold">Nombre del Evento</label>
    <input type="text" id="name" formControlName="name" class="form-control" placeholder="Ingrese el nombre del evento" required>
  </div>

  <div class="form-group mb-4">
    <label for="status" class="form-label fw-bold">Estado</label>
    <select id="status" formControlName="status" class="form-select" required>
      <option *ngFor="let status of eventStatusOptions" [value]="status">{{ status }}</option>
    </select>
  </div>

  <div class="form-group mb-4">
    <label for="description" class="form-label fw-bold">Descripción</label>
    <textarea id="description" formControlName="description" class="form-control" placeholder="Descripción del evento" required></textarea>
  </div>

  <div class="form-group mb-4">
    <label for="localityImage" class="form-label fw-bold">Imagen de Localidad</label>
    <input type="file" (change)="onLocalityImageSelected($event)" class="form-control" required>
    <div class="mt-2">
      <img *ngIf="localityImageUrl" [src]="localityImageUrl" alt="Vista previa de imagen de localidad" class="img-thumbnail" width="200">
    </div>
  </div>

  <div class="form-group mb-4">
    <label for="type" class="form-label fw-bold">Tipo de Evento</label>
    <select id="type" formControlName="type" class="form-select" required>
      <option *ngFor="let type of eventTypeOptions" [value]="type">{{ type }}</option>
    </select>
  </div>

  <div class="form-group mb-4">
    <label for="date" class="form-label fw-bold">Fecha del Evento</label>
    <input type="datetime-local" id="date" formControlName="date" class="form-control" required>
  </div>

  <div class="form-group mb-4">
    <label for="city" class="form-label fw-bold">Ciudad</label>
    <select id="city" formControlName="city" class="form-select" required>
      <option *ngFor="let city of cityOptions" [value]="city">{{ city }}</option>
    </select>
  </div>

  <div class="form-group mb-4">
    <label for="address" class="form-label fw-bold">Dirección</label>
    <input type="text" id="address" formControlName="address" class="form-control" placeholder="Dirección del evento" required>
  </div>

  <div class="form-group mb-4">
    <label for="amount" class="form-label fw-bold">Cantidad de Localidades</label>
    <input type="number" id="amount" formControlName="amount" class="form-control" placeholder="Número de localidades" required>
  </div>

  <!-- Sección de Localidades -->
  <div formArrayName="localities" class="mb-4">
    <div *ngFor="let locality of localities.controls; let i = index" [formGroupName]="i" class="border rounded p-3 mb-3 bg-white shadow-sm">
      <h5 class="mb-3">Localidad {{ i + 1 }}</h5>

      <div class="form-group mb-2">
        <label for="name-{{ i }}" class="form-label fw-bold">Nombre</label>
        <select id="name" formControlName="name" class="form-select" required>
          <option *ngFor="let name of locaityName" [value]="name">{{ name }}</option>
        </select>      </div>



      <div class="form-group mb-2">
        <label for="price-{{ i }}" class="form-label">Precio</label>
        <input type="number" id="price-{{ i }}" formControlName="price" class="form-control" placeholder="Precio de la localidad" required>
      </div>

      <div class="form-group mb-2">
        <label for="ticketsSold-{{ i }}" class="form-label">Boletos Vendidos</label>
        <input type="number" id="ticketsSold-{{ i }}" formControlName="ticketsSold" class="form-control" required>
      </div>

      <div class="form-group mb-2">
        <label for="maximumCapacity-{{ i }}" class="form-label">Capacidad Máxima</label>
        <input type="number" id="maximumCapacity-{{ i }}" formControlName="maximumCapacity" class="form-control" required>
      </div>

      <button type="button" class="btn btn-outline-danger btn-sm mt-3" (click)="removeLocality(i)">Eliminar Localidad</button>
    </div>

    <button type="button" class="btn btn-outline-secondary mt-3" (click)="addLocality()">Agregar Localidad</button>
  </div>

  <button type="submit" class="btn btn-primary mt-4 w-100">Guardar Evento</button>
</form>
